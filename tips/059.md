---
tags:
- pandoc
- custom reader
---

Custom Lua readers allow to support additional formats, and other
interesting features. Here's one converting code files to
syntax-highlighted docs.

local p = pandoc function to_cb (s) local \_, lang =
p.path.split_extension(s.name) return p.Div{ p.Header(1, s.name == ''
and '`<stdin>`{=html}' or s.name), p.CodeBlock(s.text, {class=lang}), }
end function Reader (inp) return p.Pandoc(inp:map(to_cb)) end

Usage: pandoc -f src.lua -o out.docx

pandoc custom reader https://pandoc.org/custom-readers
